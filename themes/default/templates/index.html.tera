<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ site_title | escape }}</title>
    {% if site_desc and site_desc != "" %}
    <meta name="description" content="{{ site_desc | escape }}">
    {% endif %}
    <meta name="generator" content="dove">
    <meta name="robots" content="{{ meta_robots | default(value="index,follow") }}">
    {% if canonical_url %}<link rel="canonical" href="{{ canonical_url }}">{% endif %}
    <meta property="og:type" content="website">
    <meta property="og:title" content="{{ site_title | escape }}">
    {% if site_desc and site_desc != "" %}<meta property="og:description" content="{{ site_desc | escape }}">{% endif %}
    {% if canonical_url %}<meta property="og:url" content="{{ canonical_url }}">{% endif %}
    <meta property="og:site_name" content="{{ site_title | escape }}">
    {% if og_image %}<meta property="og:image" content="{{ og_image }}">{% endif %}
    <link rel="icon" href="assets/favicon-f.svg" type="image/svg+xml">
    <link rel="stylesheet" href="assets/styles.css">
    <meta name="theme-color" content="#f45d22">
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": {{ site_title | json_encode | safe }},
      {% if canonical_url %}
      "url": {{ canonical_url | json_encode | safe }},
      {% endif %}
      "potentialAction": {
        "@type": "SearchAction",
        "target": "?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
  </head>
  <body class="theme-{{ color_scheme }} layout-{{ layout }}">
    <div class="top-actions">
      {% if has_intranet %}
      <a class="top-link" id="toggleNet" href="{{ network_switch_href }}" title="切换内/外网">{{ mode_other_label }}</a>
      {% endif %}
      <button id="toggleTheme" class="btn ghost" title="切换主题">🌓</button>
    </div>
    <header class="hero">
      <div class="hero-inner">
        <div class="hero-center">
          <div id="clock" class="clock">--:--</div>
          <a id="clock-date" class="clock-date" href="https://www.51wnl.com/webcalandar/index.html" target="_blank" rel="noopener"></a>
        </div>
        <div class="searchbox">
          <span class="sb-icon" aria-hidden="true">🔎</span>
          <input id="q" class="search sb-input" type="search" placeholder="搜索站点、域名、描述..." aria-label="搜索">
          <div class="engine sb-engine">
            <button id="engineBtn" class="sb-engine-btn" aria-haspopup="listbox" aria-expanded="false"><span id="engineLabel">{{ engine_default }}</span> ▾</button>
            <ul id="engineMenu" class="engine-menu" role="listbox" hidden>
              {% for e in search_engines %}
              <li role="option" tabindex="0" data-name="{{ e.name }}" data-template="{{ e.template }}">
                {% if e.icon %}<img class="engine-icon" src="{{ e.icon | escape }}" alt="">{% endif %}
                <span class="engine-name">{{ e.name }}</span>
              </li>
              {% endfor %}
            </ul>
          </div>
          <button id="doSearch" class="sb-action" title="使用所选搜索引擎搜索">↵</button>
        </div>
      </div>
    </header>

    <main class="container appwrap">
      {% if categories | length > 0 %}
      <aside class="sidebar" id="sidebar">
        <ul class="cats" id="cats">
          {% for c in categories %}
          <li class="cat-item" data-cat="{{ c }}" tabindex="0">{{ c }}</li>
          {% endfor %}
        </ul>
      </aside>
      {% endif %}
      <div class="content" id="content">
      {% for g in groups %}
      <section class="group" data-cat="{{ g.category }}">
        <h2 class="group-title">{{ g.name | escape }}</h2>
        <div class="grid">
          {% for l in g.links %}
          <a class="card tile" href="{{ l.href | escape }}" target="_blank" rel="noopener noreferrer" data-name="{{ l.name | escape }}" data-host="{{ l.host | escape }}" data-desc="{{ l.desc | escape }}">
            <div class="card-head">
              {% if l.icon %}
              <img class="icon" src="{{ l.icon | escape }}" alt="">
              {% endif %}
              <div class="title">{{ l.name | escape }}</div>
            </div>
            {% if l.desc and l.desc != "" %}
            <div class="desc">{{ l.desc | escape }}</div>
            {% endif %}
            {# host 显示不需要，列表卡片中移除 #}
          </a>
          {% endfor %}
        </div>
      </section>
      {% endfor %}
      </div>
    </main>

    <footer class="site-footer">Made with ❤ by <a href="https://github.com/dovenav/dove" target="_blank" rel="noopener">dove</a> · <a href="sitemap.xml">Sitemap</a> · <a href="robots.txt">Robots</a> · v{{ build_version | escape }}</footer>
    <script src="assets/app.js"></script>
  </body>
</html>
